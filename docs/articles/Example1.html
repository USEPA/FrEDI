<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="Running &amp; Analyzing results from FrEDI's default scenario.
">
<title>Example #1 • FrEDI</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.11/clipboard.min.js" integrity="sha512-7O5pXpc0oCRrxk8RUfDYFgn0nO1t+jLuIOQdOMRp4APB7uZ4vSjspzp5y6YDtDs4VzUSTbWzBFZ/LKJhnyFOKw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Example #1">
<meta property="og:description" content="Running &amp; Analyzing results from FrEDI's default scenario.
">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light" data-bs-theme="light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">FrEDI</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">4.2.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-getting-started">Getting Started</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-getting-started">
    <a class="dropdown-item" href="../articles/About.html">About FrEDI</a>
    <a class="dropdown-item" href="../articles/manual.html">Installing &amp; Running FrEDI</a>
    <a class="dropdown-item" href="../articles/contributing.html">Contributing to FrEDI</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../articles/References.html">Documentation</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-examples">Examples</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-examples">
    <a class="dropdown-item" href="../articles/Example1.html">Example #1: Run FrEDI with default parameters</a>
    <a class="dropdown-item" href="../articles/Example2.html">Example #2: Run FrEDI_SV with default parameters</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Functions</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">News</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/USEPA/FrEDI">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">



<script src="Example1_files/kePrint-0.0.1/kePrint.js"></script><link href="Example1_files/lightable-0.0.1/lightable.css" rel="stylesheet">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Example #1</h1>
            
            <h4 data-toc-skip class="date">November 2024</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/USEPA/FrEDI/blob/HEAD/vignettes/articles/Example1.Rmd" class="external-link"><code>vignettes/articles/Example1.Rmd</code></a></small>
      <div class="d-none name"><code>Example1.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="running-fredi-with-default-parameters">Running FrEDI with Default Parameters<a class="anchor" aria-label="anchor" href="#running-fredi-with-default-parameters"></a>
</h2>
<p>FrEDI is commonly used to project the annual, temperature and sea
level change-driven physical and economic impacts associated with
user-defined trajectories of U.S. temperature change (relative to a
1985-2005 baseline), population, and GDP.</p>
<p>This vignette provides a simple example of how to run and analyze
data from FrEDI’s default scenario.</p>
<p><strong>This example script:</strong></p>
<ol style="list-style-type: decimal">
<li>
<a href="#installFrEDI">Installs</a> the <code>FrEDI</code> R
package from GitHub</li>
<li>
<a href="#setFrEDI">Sets</a> <code>FrEDI</code> input and run
parameters</li>
<li>
<a href="#runFrEDI">Runs</a> <code>FrEDI</code> with inputs
specified in Step 2</li>
<li>
<a href="#analyzeFrEDI">Shows</a> example types of analyses using
<code>FrEDI</code> output data</li>
</ol>
<p>For more information about <code>FrEDI</code>, see the <a href="About.html">About</a> page and <a href="https://www.epa.gov/cira/fredi" class="external-link">FrEDI Technical
Documentation</a></p>
<p><br></p>
</div>
<div class="section level2">
<h2 id="installFrEDI">Step 1. Install <code>FrEDI</code> R package<a class="anchor" aria-label="anchor" href="#installFrEDI"></a>
</h2>
<p>When installing for the first time, see the <a href="manual.html">Installing &amp; Running FrEDI</a> page.</p>
<p>Load package:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">require</a></span><span class="op">(</span><span class="va"><a href="https://usepa.github.io/FrEDI">FrEDI</a></span><span class="op">)</span></span></code></pre></div>
<p>After successfully <a href="manual.html">installing
<code>FrEDI</code></a>, documentation for <code>FrEDI</code> functions
can be accessed in the same way as for other <code>R</code>
packages.</p>
<p>For an overview of <code>FrEDI</code>’s user-defined functions, type
<code><a href="https://rdrr.io/r/base/library.html" class="external-link">library(help="FrEDI")</a></code> into an <code>R</code> console (this
command will show documentation for <code>FrEDI</code> even if the
package is not installed).</p>
<p>For documentation for a specific function, type
<code>help("*functionName*", package="FrEDI")</code> into an
<code>R</code> console, where <code>*functionName*</code> is the name of
one of the functions in <code>FrEDI</code> (e.g.,
<code><a href="../reference/aggregate_impacts.html">help("aggregate_impacts", package="FrEDI")</a></code>). Alternatively,
use the syntax <code>?FrEDI::*functionName*</code> (e.g.,
<code>?FrEDI::run_fredi()</code>).</p>
<p>If <code>FrEDI</code> has been installed, users can also search for
function-specific documentation in RStudio through the <a href="https://www.r-project.org/help.html" class="external-link"><strong>Help</strong>
window</a>. Move the focus to the <strong>Help</strong> window using the
keyboard shortcut <code>Ctrl+3</code> or toggle the search field in
<strong>Help</strong> using <code>Ctrl+Alt+F1</code>. Documentation for
each function includes examples.</p>
<p><br></p>
</div>
<div class="section level2">
<h2 id="setFrEDI">Step 2. Set <code>FrEDI</code> Runtime parameters<a class="anchor" aria-label="anchor" href="#setFrEDI"></a>
</h2>
<p>First, use this chunk to specify &amp; format input projections.
Either provide paths to specific files, or set to <code>NULL</code> to
use default projections for each variable.</p>
<p>Use this chunk to specify the input trajectories (temperature, sea
level, population, and/or GDP) and runtime parameters for
<code>FrEDI</code>.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">### To run FrEDI for more than one scenario, the code below can be</span></span>
<span><span class="co">### adapted into a loop to format the inputs for each scenario. </span></span>
<span></span>
<span><span class="co">###***********************************************</span></span>
<span><span class="co">### 1. Specify &amp; Format Input Trajectories (temperature, population, U.S. GDP)</span></span>
<span></span>
<span><span class="co">### Input Files</span></span>
<span><span class="co">### * GDP</span></span>
<span><span class="co">### - Description: csv file with time series of U.S. Gross Domestic Product (units: 2015$, values: &gt;= 0) </span></span>
<span><span class="co">### - data must start in 2010 or earlier</span></span>
<span><span class="co">### - Must have columns "year", "gdp_usd"</span></span>
<span><span class="co">### - If NULL - use default GDP trajectory</span></span>
<span><span class="va">gdpInputFile</span> <span class="op">&lt;-</span> <span class="cn">NULL</span></span>
<span></span>
<span><span class="co">### * Population</span></span>
<span><span class="co">### - Description: csv file with time series of annual U.S. population (values &gt;= 0) </span></span>
<span><span class="co">### - Data must start in 2010 or earlier</span></span>
<span><span class="co">### - Must have columns "year" and "pop"; other columns may be required, depending on the popArea argument flag</span></span>
<span><span class="co">### - If NULL - use default population trajectory (from ICLUS)</span></span>
<span><span class="va">popInputFile</span> <span class="op">&lt;-</span> <span class="cn">NULL</span></span>
<span></span>
<span><span class="co">### * Temperature</span></span>
<span><span class="co">### - Description: csv file with time series of temperature relative to 1986-2005 average </span></span>
<span><span class="co">### - (units: degC, values: &gt;=0)</span></span>
<span><span class="co">### - data must start in 2000 or earlier and can be global or CONUS</span></span>
<span><span class="co">### - If global --&gt; must convert to CONUS temperature using the import_inputs() helper function</span></span>
<span><span class="co">### - Must have columns "year", "temp_C"</span></span>
<span><span class="va">tempInputFile</span> <span class="op">&lt;-</span> <span class="cn">NULL</span></span>
<span></span>
<span><span class="co">### * SLR</span></span>
<span><span class="co">### - Description: csv file with time series of global mean sea level rise relative to 2000</span></span>
<span><span class="co">### - (units: cm, values: &gt;= 0 and &lt;= 250)</span></span>
<span><span class="co">### - data must start in 2000 or earlier</span></span>
<span><span class="co">### - Must have columns "year", "slr_cm"</span></span>
<span><span class="co">### - If NULL - slr is calculated from the input temperature trajectory</span></span>
<span><span class="va">slrInputFile</span> <span class="op">&lt;-</span> <span class="cn">NULL</span> </span>
<span></span>
<span><span class="co">### Input Trajectory Parameters</span></span>
<span><span class="co">### * Population area flag</span></span>
<span><span class="co">### - Description: Use this to specify the geographical scale of the population data</span></span>
<span><span class="co">### - Options: "state","regional","national".</span></span>
<span><span class="co">### - For more information, see `?import_inputs()` for more information</span></span>
<span><span class="va">popAreaflag</span>  <span class="op">&lt;-</span> <span class="st">"state"</span>   </span>
<span></span>
<span><span class="co">### * Temperature type flag</span></span>
<span><span class="co">### - Description: Use this to specify whether the input temperature is global or CONUS</span></span>
<span><span class="co">### - import_inputs() will convert to global to CONUS temperature</span></span>
<span><span class="co">### - Options: global (input is global T), conus (input is CONUS T)</span></span>
<span><span class="co">### - Default: defaults to "conus"</span></span>
<span><span class="va">temptypeflag</span> <span class="op">&lt;-</span> <span class="st">"global"</span> </span>
<span></span>
<span><span class="co">### Use the import_inputs() helper function to format the input trajectories for use in FrEDI</span></span>
<span><span class="va">inputs_list</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/import_inputs.html">import_inputs</a></span><span class="op">(</span></span>
<span>  inputsList<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    temp <span class="op">=</span> <span class="va">tempInputFile</span>,</span>
<span>    slr  <span class="op">=</span> <span class="va">slrInputFile</span>,</span>
<span>    gdp  <span class="op">=</span> <span class="va">gdpInputFile</span>,</span>
<span>    pop  <span class="op">=</span> <span class="va">popInputFile</span></span>
<span>  <span class="op">)</span>,</span>
<span>  temptype <span class="op">=</span> <span class="va">temptypeflag</span>,</span>
<span>  popArea  <span class="op">=</span> <span class="va">popAreaflag</span></span>
<span><span class="op">)</span> <span class="co">### End import_inputs</span></span>
<span><span class="va">inputs_list</span> <span class="op">|&gt;</span> <span class="fu">glimpse</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##  list()</span></span></code></pre>
<p>If no input files are specified, <code><a href="../reference/run_fredi.html">run_fredi()</a></code> will use
default temperature, U.S. population, and GDP projections. In this case,
<code><a href="../reference/run_fredi.html">run_fredi()</a></code> will calculate annual projected sea level
change based on the default temperature change.</p>
<p>Default population scenarios are based on UN Median Population
projection (<a href="https://www.un.org/en/development/desa/publications/world-population-prospects-2015-revision.html" class="external-link">United
Nations, 2015</a>) and EPA’s ICLUSv2 model (<a href="https://www.pnas.org/doi/abs/10.1073/pnas.1002096107" class="external-link">Bierwagen et
al., 2010</a>; <a href="https://cfpub.epa.gov/ncea/risk/recordisplay.cfm?deid=322479" class="external-link">EPA
2017</a>), and GDP from the EPPA version 6 model (<a href="https://globalchange.mit.edu/publication/16262" class="external-link">Chen et al.,
2015</a>). Default temperature projections are from the GCAM reference
scenario. Current default projections of U.S. GDP, national population,
and U.S. temperature in the year 2090 are 70 trillion (2015USD), 438
million, and 3.4°C respectively.</p>
<p><br></p>
<p>Next, set <code>FrEDI</code> runtime parameters</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">### Thru2300 Flag</span></span>
<span><span class="co">### - Purpose: Specify whether to run FrEDI through 2100 (default) or extend to 2300</span></span>
<span><span class="co">### - Default: FALSE (will run to 2100)</span></span>
<span><span class="va">thru2300Flag</span> <span class="op">&lt;-</span>  <span class="cn">FALSE</span></span>
<span></span>
<span><span class="co">### Sector list flag</span></span>
<span><span class="co">### - Purpose: Specify the vector of sectors for which to calculate results</span></span>
<span><span class="co">### - Default: Report output for all sectors</span></span>
<span><span class="co">### - See FrEDI::get_sectorInfo() for list of all sectors</span></span>
<span><span class="va">sectorListFlag</span> <span class="op">&lt;-</span> <span class="cn">NULL</span>  </span>
<span></span>
<span><span class="co">### Aggregation level flag</span></span>
<span><span class="co">### - Purpose: Specify the desired level of results aggregation. For example,</span></span>
<span><span class="co">###   to report national total results across all underlying GCM </span></span>
<span><span class="co">###   damage functions, set the flag to c("national","modelaverage")</span></span>
<span><span class="co">### - Options: at least one from c("national", "modelaverage", "impactyear",</span></span>
<span><span class="co">###   "impacttype", "all"), or "none". </span></span>
<span><span class="co">### - Default: c("national", "modelaverage", "impactyear","impacttype")</span></span>
<span><span class="va">aggLevelFlag</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"national"</span>, <span class="st">"modelaverage"</span>, <span class="st">"impactyear"</span><span class="op">)</span></span>
<span></span>
<span><span class="co">### Maximum year flag</span></span>
<span><span class="co">### - Purpose: Specify the last year of the analysis </span></span>
<span><span class="co">### - Default: 2100</span></span>
<span><span class="va">maxYearFlag</span> <span class="op">&lt;-</span> <span class="fl">2100</span></span>
<span></span>
<span><span class="co">### Elasticity flag</span></span>
<span><span class="co">### - Purpose: Specify the income elasticity used to adjust the Value of a</span></span>
<span><span class="co">###   Statistical Life (VSL)</span></span>
<span><span class="co">### Options: any numeric value</span></span>
<span><span class="co">### Default: 1</span></span>
<span><span class="va">elasticityFlag</span> <span class="op">&lt;-</span> <span class="fl">1</span>   </span>
<span></span>
<span><span class="co">### Output list flag</span></span>
<span><span class="co">### - Purpose: Specify whether to return input arguments in addition to results data frame</span></span>
<span><span class="co">### - Options: TRUE/FALSE. </span></span>
<span><span class="co">### - Default: FALSE</span></span>
<span><span class="va">outputListFlag</span> <span class="op">&lt;-</span> <span class="cn">FALSE</span></span>
<span></span>
<span><span class="co">### All columns flag</span></span>
<span><span class="co">### - Purpose: Specify whether to include physical and economic multipliers (used in testing)</span></span>
<span><span class="co">### - Options: TRUE/FALSE. </span></span>
<span><span class="co">### - Default: FALSE</span></span>
<span><span class="va">allColsFlag</span> <span class="op">&lt;-</span> <span class="cn">TRUE</span></span>
<span></span>
<span><span class="co">### Silent flag</span></span>
<span><span class="co">### - Purpose: Specify the level of messaging to the user</span></span>
<span><span class="co">### - Options: TRUE/FALSE. </span></span>
<span><span class="co">### - Default: TRUE</span></span>
<span><span class="va">silentFlag</span> <span class="op">&lt;-</span> <span class="cn">TRUE</span>       </span></code></pre></div>
<p><br></p>
</div>
<div class="section level2">
<h2 id="runFrEDI">Step 3. Run <code>FrEDI</code><a class="anchor" aria-label="anchor" href="#runFrEDI"></a>
</h2>
<p>Run <code>FrEDI</code> using the main <code><a href="../reference/run_fredi.html">run_fredi()</a></code>
function.</p>
<p>Default parameter options are used for any parameters that are not
specified in <code><a href="../reference/run_fredi.html">run_fredi()</a></code>.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">### Run FrEDI using inputs and parameters set in Step #2</span></span>
<span><span class="va">output_df</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/run_fredi.html">run_fredi</a></span><span class="op">(</span></span>
<span>  inputsList <span class="op">=</span> <span class="va">inputs_list</span>, </span>
<span>  sectorList <span class="op">=</span> <span class="va">sectorListFlag</span>,</span>
<span>  <span class="co"># sectorList = "Asphalt Roads",</span></span>
<span>  aggLevels  <span class="op">=</span> <span class="va">aggLevelFlag</span>,</span>
<span>  elasticity <span class="op">=</span> <span class="va">elasticityFlag</span>,</span>
<span>  maxYear    <span class="op">=</span> <span class="va">maxYearFlag</span>,</span>
<span>  thru2300   <span class="op">=</span> <span class="va">thru2300Flag</span>,</span>
<span>  outputList <span class="op">=</span> <span class="va">outputListFlag</span>,</span>
<span>  allCols    <span class="op">=</span> <span class="va">allColsFlag</span>,</span>
<span>  silent     <span class="op">=</span> <span class="va">silentFlag</span></span>
<span><span class="op">)</span> <span class="co">### End run_fredi</span></span></code></pre></div>
<pre><code><span><span class="co">## Checking scenarios...</span></span></code></pre>
<pre><code><span><span class="co">## Calculating impacts...</span></span></code></pre>
<pre><code><span><span class="co">##      Formatting initial results...</span></span></code></pre>
<pre><code><span><span class="co">##      Calculating temperature-driven scaled impacts...</span></span></code></pre>
<pre><code><span><span class="co">##      Calculating SLR-driven scaled impacts...</span></span></code></pre>
<pre><code><span><span class="co">## Formatting results...</span></span></code></pre>
<pre><code><span><span class="co">## Aggregating impacts...</span></span></code></pre>
<pre><code><span><span class="co">## </span></span>
<span><span class="co">## Finished.</span></span></code></pre>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># output_df |&gt; glimpse()</span></span>
<span><span class="va">output_df</span> <span class="op">|&gt;</span> <span class="fu">pull</span><span class="op">(</span><span class="va">model</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##  [1] "Average"       "CCSM4"         "CanESM2"       "GCM Ensemble" </span></span>
<span><span class="co">##  [5] "GFDL-CM3"      "GISS-E2-R"     "HadGEM2-ES"    "MIROC5"       </span></span>
<span><span class="co">##  [9] "MRI-CGCM3"     "Interpolation"</span></span></code></pre>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">### Filter to specific year</span></span>
<span><span class="va">c_years</span>     <span class="op">&lt;-</span>  <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2100</span><span class="op">)</span></span>
<span></span>
<span><span class="co">### Filter to specific values:</span></span>
<span><span class="co">### - Filter to primary sectors</span></span>
<span><span class="co">### - Filter to average models/SLR scenario interpolations</span></span>
<span><span class="co">### - Filter to specified years</span></span>
<span><span class="va">df_primary</span> <span class="op">&lt;-</span> <span class="va">output_df</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">sectorprimary</span> <span class="op">==</span> <span class="fl">1</span>, <span class="va">includeaggregate</span> <span class="op">&gt;=</span> <span class="fl">1</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">model</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Average"</span>, <span class="st">"Interpolation"</span><span class="op">)</span><span class="op">)</span><span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">year</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="va">c_years</span><span class="op">)</span></span>
<span></span>
<span><span class="co">### Aggregate across impact types for each sector, calculate billions and round values to nearest dollar</span></span>
<span><span class="co">### - Convert to billions of dollars</span></span>
<span><span class="co">### - Round values to nearest dollar</span></span>
<span><span class="va">df_sumTypes</span> <span class="op">&lt;-</span> <span class="va">df_primary</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="../reference/aggregate_impacts.html">aggregate_impacts</a></span><span class="op">(</span></span>
<span>    aggLevels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"impacttype"</span><span class="op">)</span>, </span>
<span>    columns   <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"annual_impacts"</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="co">### Option: write output</span></span>
<span><span class="co">### Write Full Dataframe to CSV (or feather)</span></span>
<span><span class="co"># write.csv(output_df, './output/example_output.csv')</span></span>
<span></span>
<span><span class="co">### First five lines of output dataframe</span></span>
<span><span class="co"># output_df[1:5,]</span></span></code></pre></div>
<p><br></p>
</div>
<div class="section level2">
<h2 id="analyzeFrEDI">Step 4. Analyze <code>FrEDI</code><a class="anchor" aria-label="anchor" href="#analyzeFrEDI"></a>
</h2>
<p>The following chunks provide three examples options for how to
analyze the raw output dataframe from
<code><a href="../reference/run_fredi.html">FrEDI::run_fredi()</a></code>.</p>
<p><strong>Disclaimer: These results only provide an illustrative
example and should <em>NOT</em> be used for further
analysis.</strong></p>
<div class="section level3">
<h3 id="example-1">Example 1<a class="anchor" aria-label="anchor" href="#example-1"></a>
</h3>
<p>Extract national average of economic damages (in billions of dollars
in 2015$) for all <code>FrEDI</code> sectors for a specified year</p>
<p>The output of this chunk includes a snapshot of a subset of the
resulting dataframe.</p>
<ul>
<li>Note: Use the <code>sectorprimary == 1</code> and
<code>includeaggregate &gt;= 1</code> flags to filter the
<code>FrEDI</code> dataframe for impacts from only the default impact
sectors and variants. For recommendations on aggregating impacts across
sectors, see the FrEDI Technical Documentation (Chapter 2) and
<code><a href="../reference/run_fredi.html">FrEDI::run_fredi()</a></code> documentation.</li>
</ul>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">### Specify groups</span></span>
<span><span class="va">groups1</span>     <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"sector"</span>, <span class="st">"region"</span>, <span class="st">"year"</span><span class="op">)</span></span>
<span><span class="va">sumCol1</span>     <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"annual_impacts"</span><span class="op">)</span></span>
<span><span class="va">select1</span>     <span class="op">&lt;-</span> <span class="va">groups1</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">sumCol1</span><span class="op">)</span></span>
<span></span>
<span><span class="co">### Filter to specific values:</span></span>
<span><span class="co">### - Filter for national aggregate results averaged across all GCMs</span></span>
<span><span class="co">### - Filter to specified years</span></span>
<span><span class="co">### - Select specific columns</span></span>
<span><span class="va">df_filter1</span>  <span class="op">&lt;-</span> <span class="va">df_sumTypes</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">region</span> <span class="op">==</span> <span class="st">"National Total"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">select</span><span class="op">(</span><span class="fu">all_of</span><span class="op">(</span><span class="va">select1</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">rename</span><span class="op">(</span><span class="st">"billions_2015$"</span> <span class="op">=</span> <span class="va">annual_impacts</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>`billions_2015$` <span class="op">=</span> <span class="va">`billions_2015$`</span> <span class="op">/</span> <span class="fl">1e9</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">mutate_at</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"billions_2015$"</span><span class="op">)</span>, <span class="va">round</span>, <span class="fl">2</span><span class="op">)</span></span>
<span></span>
<span><span class="co">### Display first 10 sectors</span></span>
<span><span class="va">df_filter1</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span>,<span class="op">]</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">kable</span><span class="op">(</span>caption <span class="op">=</span> <span class="st">"Example *Subset* of 2100 Annual National Sectoral Temperature and Sea Level Change-Driven Impacts"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">kable_styling</span><span class="op">(</span>font_size <span class="op">=</span> <span class="fl">12</span>, full_width <span class="op">=</span> <span class="cn">F</span><span class="op">)</span></span></code></pre></div>
<table class="table table" style="font-size: 12px; width: auto !important; margin-left: auto; margin-right: auto;">
<caption style="font-size: initial !important;">
Example <em>Subset</em> of 2100 Annual National Sectoral Temperature and
Sea Level Change-Driven Impacts
</caption>
<thead><tr>
<th style="text-align:left;">
sector
</th>
<th style="text-align:left;">
region
</th>
<th style="text-align:right;">
year
</th>
<th style="text-align:right;">
billions_2015$
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;">
ATS Temperature-Related Mortality
</td>
<td style="text-align:left;">
National Total
</td>
<td style="text-align:right;">
2100
</td>
<td style="text-align:right;">
2766.90
</td>
</tr>
<tr>
<td style="text-align:left;">
CIL Agriculture
</td>
<td style="text-align:left;">
National Total
</td>
<td style="text-align:right;">
2100
</td>
<td style="text-align:right;">
8.85
</td>
</tr>
<tr>
<td style="text-align:left;">
CIL Crime
</td>
<td style="text-align:left;">
National Total
</td>
<td style="text-align:right;">
2100
</td>
<td style="text-align:right;">
1.69
</td>
</tr>
<tr>
<td style="text-align:left;">
Climate-Driven Changes in Air Quality
</td>
<td style="text-align:left;">
National Total
</td>
<td style="text-align:right;">
2100
</td>
<td style="text-align:right;">
291.18
</td>
</tr>
<tr>
<td style="text-align:left;">
Coastal Properties
</td>
<td style="text-align:left;">
National Total
</td>
<td style="text-align:right;">
2100
</td>
<td style="text-align:right;">
14.39
</td>
</tr>
<tr>
<td style="text-align:left;">
Electricity Demand and Supply
</td>
<td style="text-align:left;">
National Total
</td>
<td style="text-align:right;">
2100
</td>
<td style="text-align:right;">
18.95
</td>
</tr>
<tr>
<td style="text-align:left;">
Electricity Transmission and Distribution
</td>
<td style="text-align:left;">
National Total
</td>
<td style="text-align:right;">
2100
</td>
<td style="text-align:right;">
14.57
</td>
</tr>
<tr>
<td style="text-align:left;">
Inland Flooding
</td>
<td style="text-align:left;">
National Total
</td>
<td style="text-align:right;">
2100
</td>
<td style="text-align:right;">
1.28
</td>
</tr>
<tr>
<td style="text-align:left;">
Labor
</td>
<td style="text-align:left;">
National Total
</td>
<td style="text-align:right;">
2100
</td>
<td style="text-align:right;">
55.51
</td>
</tr>
<tr>
<td style="text-align:left;">
Marine Fisheries
</td>
<td style="text-align:left;">
National Total
</td>
<td style="text-align:right;">
2100
</td>
<td style="text-align:right;">
-0.03
</td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="example-2">Example 2<a class="anchor" aria-label="anchor" href="#example-2"></a>
</h3>
<p>Extract national average of physical damages for all
<code>FrEDI</code> sectors that include physical impacts, for a
specified year:</p>
<ul>
<li>The output of this chunk includes a snapshot of a subset of the
resulting dataframe.</li>
<li>Note: Use the <code>sectorprimary == 1</code> and
<code>includeaggregate &gt;= 1</code> flags to filter the
<code>FrEDI</code> dataframe for impacts from only the default impact
sectors and variants. For recommendations on aggregating impacts across
sectors, see the FrEDI Technical Documentation (Chapter 2) and
<code><a href="../reference/run_fredi.html">FrEDI::run_fredi()</a></code> documentation.</li>
</ul>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">### Specify groups</span></span>
<span><span class="va">groups2</span>     <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"sector"</span>, <span class="st">"impactType"</span>, <span class="st">"physicalmeasure"</span>, <span class="st">"physical_impacts"</span>, <span class="st">"region"</span>, <span class="st">"year"</span><span class="op">)</span></span>
<span><span class="va">sumCol2</span>     <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"physical_impacts"</span><span class="op">)</span></span>
<span><span class="va">select2</span>     <span class="op">&lt;-</span> <span class="va">groups2</span>  <span class="op">|&gt;</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">sumCol2</span><span class="op">)</span></span>
<span></span>
<span><span class="co">### Filter to specific values:</span></span>
<span><span class="co">### - Filter for national aggregate results averaged across all GCMs</span></span>
<span><span class="co">### - Filter to specified years</span></span>
<span><span class="co">### - Select specific columns</span></span>
<span><span class="va">df_filter2</span> <span class="op">&lt;-</span> <span class="va">df_primary</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">region</span> <span class="op">==</span> <span class="st">"National Total"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="op">!</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">physicalmeasure</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">mutate_at</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">sumCol2</span><span class="op">)</span>, <span class="va">round</span>, <span class="fl">0</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">select</span><span class="op">(</span><span class="fu">all_of</span><span class="op">(</span><span class="va">select2</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co">### Display first 10 rows</span></span>
<span><span class="va">df_filter2</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">6</span><span class="op">:</span><span class="fl">9</span>, <span class="fl">14</span><span class="op">)</span>,<span class="op">]</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">kable</span><span class="op">(</span>caption <span class="op">=</span> <span class="st">"Example *Subset* of 2100 Annual National Sectoral Temperature and Sea Level Change-Driven Physical Impacts"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">kable_styling</span><span class="op">(</span>font_size <span class="op">=</span> <span class="fl">12</span>, full_width <span class="op">=</span> <span class="cn">F</span><span class="op">)</span></span></code></pre></div>
<table class="table table" style="font-size: 12px; width: auto !important; margin-left: auto; margin-right: auto;">
<caption style="font-size: initial !important;">
Example <em>Subset</em> of 2100 Annual National Sectoral Temperature and
Sea Level Change-Driven Physical Impacts
</caption>
<thead><tr>
<th style="text-align:left;">
sector
</th>
<th style="text-align:left;">
impactType
</th>
<th style="text-align:left;">
physicalmeasure
</th>
<th style="text-align:right;">
physical_impacts
</th>
<th style="text-align:left;">
region
</th>
<th style="text-align:right;">
year
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;">
ATS Temperature-Related Mortality
</td>
<td style="text-align:left;">
N/A
</td>
<td style="text-align:left;">
Premature Mortality
</td>
<td style="text-align:right;">
83858
</td>
<td style="text-align:left;">
National Total
</td>
<td style="text-align:right;">
2100
</td>
</tr>
<tr>
<td style="text-align:left;">
CIL Crime
</td>
<td style="text-align:left;">
Property
</td>
<td style="text-align:left;">
Crimes
</td>
<td style="text-align:right;">
3264
</td>
<td style="text-align:left;">
National Total
</td>
<td style="text-align:right;">
2100
</td>
</tr>
<tr>
<td style="text-align:left;">
CIL Crime
</td>
<td style="text-align:left;">
Violent
</td>
<td style="text-align:left;">
Crimes
</td>
<td style="text-align:right;">
5713
</td>
<td style="text-align:left;">
National Total
</td>
<td style="text-align:right;">
2100
</td>
</tr>
<tr>
<td style="text-align:left;">
Climate-Driven Changes in Air Quality
</td>
<td style="text-align:left;">
Ozone
</td>
<td style="text-align:left;">
Premature Mortality
</td>
<td style="text-align:right;">
2108
</td>
<td style="text-align:left;">
National Total
</td>
<td style="text-align:right;">
2100
</td>
</tr>
<tr>
<td style="text-align:left;">
Climate-Driven Changes in Air Quality
</td>
<td style="text-align:left;">
PM2.5
</td>
<td style="text-align:left;">
Premature Mortality
</td>
<td style="text-align:right;">
6717
</td>
<td style="text-align:left;">
National Total
</td>
<td style="text-align:right;">
2100
</td>
</tr>
<tr>
<td style="text-align:left;">
Labor
</td>
<td style="text-align:left;">
N/A
</td>
<td style="text-align:left;">
Lost Work Hours
</td>
<td style="text-align:right;">
659458039
</td>
<td style="text-align:left;">
National Total
</td>
<td style="text-align:right;">
2100
</td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="example-3">Example 3<a class="anchor" aria-label="anchor" href="#example-3"></a>
</h3>
<p>Extract state economic impacts for <code>FrEDI</code> sectors for a
specified year:</p>
<ul>
<li>The output of this chunk includes a snapshot of a subset of the
resulting dataframe.</li>
<li>Note: Use the <code>sectorprimary == 1</code> and
<code>includeaggregate &gt;= 1</code> flags to filter the
<code>FrEDI</code> dataframe for impacts from only the default impact
sectors and variants. For recommendations on aggregating impacts across
sectors, see the FrEDI Technical Documentation (Chapter 2) and
<code><a href="../reference/run_fredi.html">FrEDI::run_fredi()</a></code> documentation.</li>
</ul>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">### Specify groups</span></span>
<span><span class="va">groups3</span>     <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"sector"</span>, <span class="st">"state"</span>, <span class="st">"year"</span><span class="op">)</span></span>
<span><span class="va">joinCols3</span>   <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"state"</span>, <span class="st">"year"</span><span class="op">)</span></span>
<span><span class="va">sumCol3</span>     <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"annual_impacts"</span><span class="op">)</span></span>
<span><span class="va">select3</span>     <span class="op">&lt;-</span> <span class="va">groups3</span>  <span class="op">|&gt;</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">sumCol3</span><span class="op">)</span></span>
<span></span>
<span><span class="co">### Filter to specific values:</span></span>
<span><span class="co">### - Filter for national aggregate results averaged across all GCMs</span></span>
<span><span class="co">### - Filter to specified years</span></span>
<span><span class="co">### - Select specific columns</span></span>
<span><span class="va">df_filter3</span> <span class="op">&lt;-</span> <span class="va">df_sumTypes</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="op">!</span><span class="op">(</span><span class="va">region</span> <span class="op">==</span> <span class="st">"National Total"</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">group_by_at</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">groups3</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">summarize_at</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">sumCol3</span><span class="op">)</span>, <span class="va">sum</span>, na.rm<span class="op">=</span><span class="cn">T</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu">ungroup</span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="co">###  SEE RECOMMENDATIONS FOR AGGREGATION in FrEDI TECHNICAL DOCUMENTATION ##</span></span>
<span>  <span class="op">(</span><span class="kw">function</span><span class="op">(</span><span class="va">df0</span><span class="op">)</span><span class="op">{</span></span>
<span>    <span class="va">df1</span> <span class="op">&lt;-</span> <span class="va">df0</span> <span class="op">|&gt;</span> </span>
<span>      <span class="fu"><a href="https://rdrr.io/r/stats/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">sector</span> <span class="op">==</span> <span class="st">"Suicide"</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>      <span class="fu">select</span><span class="op">(</span><span class="op">-</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"sector"</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>      <span class="fu">rename</span><span class="op">(</span>impacts_suicide<span class="op">=</span><span class="va">annual_impacts</span><span class="op">)</span></span>
<span>    <span class="va">df0</span> <span class="op">&lt;-</span> <span class="va">df0</span> <span class="op">|&gt;</span> <span class="fu">left_join</span><span class="op">(</span><span class="va">df1</span>, by<span class="op">=</span><span class="va">joinCols3</span><span class="op">)</span></span>
<span>    <span class="va">df0</span> <span class="op">&lt;-</span> <span class="va">df0</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>impacts_suicide <span class="op">=</span> <span class="fu">case_when</span><span class="op">(</span><span class="va">impacts_suicide</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="op">)</span> <span class="op">~</span> <span class="fl">0</span>, .default<span class="op">=</span><span class="va">impacts_suicide</span><span class="op">)</span><span class="op">)</span></span>
<span>    <span class="va">df0</span> <span class="op">&lt;-</span> <span class="va">df0</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>annual_impacts <span class="op">=</span> <span class="fu">case_when</span><span class="op">(</span></span>
<span>      <span class="va">sector</span> <span class="op">==</span> <span class="st">"ATS Temperature-Related Mortality"</span> <span class="op">~</span> <span class="va">annual_impacts</span> <span class="op">-</span> <span class="va">impacts_suicide</span>,</span>
<span>      .default <span class="op">=</span> <span class="va">annual_impacts</span></span>
<span>    <span class="op">)</span><span class="op">)</span></span>
<span>    <span class="va">df0</span> <span class="op">&lt;-</span> <span class="va">df0</span> <span class="op">|&gt;</span> <span class="fu">select</span><span class="op">(</span><span class="op">-</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"impacts_suicide"</span><span class="op">)</span><span class="op">)</span></span>
<span>    <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="va">df0</span><span class="op">)</span></span>
<span>  <span class="op">}</span><span class="op">)</span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">group_by_at</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">joinCols3</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">summarize_at</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">sumCol3</span><span class="op">)</span>, <span class="va">sum</span>, na.rm<span class="op">=</span><span class="cn">T</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu">ungroup</span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">rename</span><span class="op">(</span><span class="st">"billions_2015$"</span> <span class="op">=</span> <span class="va">annual_impacts</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>`billions_2015$` <span class="op">=</span> <span class="va">`billions_2015$`</span> <span class="op">/</span> <span class="fl">1e9</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">mutate_at</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"billions_2015$"</span><span class="op">)</span>, <span class="va">round</span>, <span class="fl">2</span><span class="op">)</span>; <span class="va">df_filter3</span> <span class="op">|&gt;</span> <span class="fu">glimpse</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Rows: 49</span></span>
<span><span class="co">## Columns: 3</span></span>
<span><span class="co">## $ state            <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "Alabama", "Arizona", "Arkansas", "California", "Colo…</span></span>
<span><span class="co">## $ year             <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 2100, 2100, 2100, 2100, 2100, 2100, 2100, 2100, 2100,…</span></span>
<span><span class="co">## $ `billions_2015$` <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 64.43, 90.11, 36.59, 405.53, 70.17, 28.85, 9.32, 6.80…</span></span></code></pre>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">### Display first 10 rows</span></span>
<span><span class="va">df_filter3</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span>,<span class="op">]</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">kable</span><span class="op">(</span>caption <span class="op">=</span> <span class="st">"Example 2100 Annual Temperature and Sea Level Change-Driven Damages, by State"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">kable_styling</span><span class="op">(</span>font_size <span class="op">=</span> <span class="fl">12</span>, full_width <span class="op">=</span> <span class="cn">F</span><span class="op">)</span></span></code></pre></div>
<table class="table table" style="font-size: 12px; width: auto !important; margin-left: auto; margin-right: auto;">
<caption style="font-size: initial !important;">
Example 2100 Annual Temperature and Sea Level Change-Driven Damages, by
State
</caption>
<thead><tr>
<th style="text-align:left;">
state
</th>
<th style="text-align:right;">
year
</th>
<th style="text-align:right;">
billions_2015$
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;">
Alabama
</td>
<td style="text-align:right;">
2100
</td>
<td style="text-align:right;">
64.43
</td>
</tr>
<tr>
<td style="text-align:left;">
Arizona
</td>
<td style="text-align:right;">
2100
</td>
<td style="text-align:right;">
90.11
</td>
</tr>
<tr>
<td style="text-align:left;">
Arkansas
</td>
<td style="text-align:right;">
2100
</td>
<td style="text-align:right;">
36.59
</td>
</tr>
<tr>
<td style="text-align:left;">
California
</td>
<td style="text-align:right;">
2100
</td>
<td style="text-align:right;">
405.53
</td>
</tr>
<tr>
<td style="text-align:left;">
Colorado
</td>
<td style="text-align:right;">
2100
</td>
<td style="text-align:right;">
70.17
</td>
</tr>
<tr>
<td style="text-align:left;">
Connecticut
</td>
<td style="text-align:right;">
2100
</td>
<td style="text-align:right;">
28.85
</td>
</tr>
<tr>
<td style="text-align:left;">
Delaware
</td>
<td style="text-align:right;">
2100
</td>
<td style="text-align:right;">
9.32
</td>
</tr>
<tr>
<td style="text-align:left;">
District of Columbia
</td>
<td style="text-align:right;">
2100
</td>
<td style="text-align:right;">
6.80
</td>
</tr>
<tr>
<td style="text-align:left;">
Florida
</td>
<td style="text-align:right;">
2100
</td>
<td style="text-align:right;">
218.86
</td>
</tr>
<tr>
<td style="text-align:left;">
Georgia
</td>
<td style="text-align:right;">
2100
</td>
<td style="text-align:right;">
160.06
</td>
</tr>
</tbody>
</table>
<p>Please contact the <code>FrEDI</code> developers with additional
questions.</p>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Corinne Hartin, Erin McDuffie, Marcus Sarofim, Karen Noiva.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9. | August 2024</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
